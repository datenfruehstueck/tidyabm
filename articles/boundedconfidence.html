<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tidyabm">
<title>Deffuant et al.'s Bounded Confidence Model of Opinion Dynamics • tidyabm</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Deffuant et al.'s Bounded Confidence Model of Opinion Dynamics">
<meta property="og:description" content="tidyabm">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tidyabm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/boundedconfidence.html">Deffuant et al.'s Bounded Confidence Model of Opinion Dynamics</a>
    <a class="dropdown-item" href="../articles/diffusion.html">Rogers' Diffusion</a>
    <a class="dropdown-item" href="../articles/segregation.html">Schelling's Segregation</a>
    <a class="dropdown-item" href="../articles/voter.html">Holley and Liggett's Voter Model</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/datenfruehstueck/tidyabm/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Deffuant et al.'s Bounded Confidence Model of Opinion Dynamics</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/datenfruehstueck/tidyabm/blob/HEAD/vignettes/boundedconfidence.Rmd" class="external-link"><code>vignettes/boundedconfidence.Rmd</code></a></small>
      <div class="d-none name"><code>boundedconfidence.Rmd</code></div>
    </div>

    
    
<p>Read about the Bounded Confidence Model of Opinion Dynamics in the <a href="https://doi.org/10.1142/s0219525900000078" class="external-link">original
publication</a> of 2000 by Deffuant, Neau, Amblard, and Weisbuch.</p>
<p>The version implemented here sets up 100 agents and distributes an
opinion, operationalized on a normalized scale with an average (mean) of
0 and a standard deviation of 1, thus roughly ranging from -2 to +2. In
each round, each agent meets with a random other agent whereby both
update their opinion according to a slightly varying adaptation factor
my (a random number between a lower and an upper boundary of my) if, any
only if, their opinion delta is below a certain threshold.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/datenfruehstueck/tidyabm" class="external-link">tidyabm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>Model configuration parameters are combined here:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_agents</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span><span class="va">threshold</span> <span class="op">&lt;-</span> <span class="fl">2.0</span></span>
<span><span class="va">my_lower_boundary</span> <span class="op">&lt;-</span> <span class="fl">0.0</span></span>
<span><span class="va">my_upper_boundary</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span></code></pre></div>
<p>This time, creating the agent blueprints is kind of useless. That’s
because we do not give agents neither an individual opinion nor an
action. We do not give them an opinion because we want to give all
agents together a distribution of opinions so that the initial opinions
are distributed normally. We also do not give the agents their own
actions because, if specified on a per-agent level, each agent would
look for another one and, hence, some would end up being in multiple
meetings (because they reached out to one other agent and were reached
out to by one or several other agents as well).</p>
<p>So instead of specifying agent blueprints, here’s the actual model
(i.e., the environment) directly. Here, we add “empty” agents,
distribute the initial opinions, and specify the meeting action between
two random agents.</p>
<p>The most complicated part here are of course the meetings. For the
meetings, specifically, we do the following (once per
iteration/tick):</p>
<ul>
<li>we create <code>n_agents/2</code> meetings and put them into a
vector of <code>n_agents</code> elements so that each meeting appears
twice in this list</li>
<li>we distribute all agents onto these meetings so that each agent is
on exactly one meeting</li>
<li>for each meeting …
<ul>
<li>we calculate the delta between the two agents’ opinions</li>
<li>if the delta is larger than <code>threshold</code> we omit this
meeting</li>
<li>otherwise, we take a random my (between the specified lower/upper
boundary) and calculate both agents’ new opinion</li>
</ul>
</li>
<li>finally, we iterate through the meeting results (using a quicker
iteration function named <code>map</code> out of tidyverse’s <a href="https://purrr.tidyverse.org/" class="external-link">purrr</a> package) and overwrite all
the agents’ old opinions with their new opinions (note that, inside
<code>map</code> we need to overwrite anything that is outside such as
<code>me</code> with a double arrow <code>&lt;&lt;-</code>)</li>
</ul>
<p>For overall environment/model interpretation, we calculate pull out
the highest and lowest opinion per tick for later inspection. Also note
that the environment does not get an end point but will run
indefinitely. Hence, you have to set the <code>max_iterations</code> in
the <code>iterate(...)</code> function accordingly to when you want it
to stop:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_network_environment.html">create_network_environment</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="fl">13485</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_agents.html">add_agents</a></span><span class="op">(</span><span class="fu"><a href="../reference/create_agent.html">create_agent</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>             n <span class="op">=</span> <span class="va">n_agents</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/distribute_characteristic_across_agents.html">distribute_characteristic_across_agents</a></span><span class="op">(</span><span class="st">'opinion'</span>,</span>
<span>                                          <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n_agents</span>,</span>
<span>                                                mean <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                                sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_rule.html">add_rule</a></span><span class="op">(</span><span class="st">'random agent meetings'</span>,</span>
<span>           .consequence <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">me</span>, <span class="va">abm</span><span class="op">)</span> <span class="op">{</span></span>
<span>             <span class="va">meetings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">n_agents</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>             <span class="va">meeting_results</span> <span class="op">&lt;-</span> <span class="va">me</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>               <span class="fu"><a href="../reference/convert_agents_to_tibble.html">convert_agents_to_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>meeting <span class="op">=</span> <span class="va">meetings</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">meeting</span>, <span class="va">.id</span>, <span class="va">opinion</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">meeting</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>agent_1 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first</a></span><span class="op">(</span><span class="va">.id</span><span class="op">)</span>,</span>
<span>                         agent_2 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">last</a></span><span class="op">(</span><span class="va">.id</span><span class="op">)</span>,</span>
<span>                         opinion_1 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first</a></span><span class="op">(</span><span class="va">opinion</span><span class="op">)</span>,</span>
<span>                         opinion_2 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">last</a></span><span class="op">(</span><span class="va">opinion</span><span class="op">)</span>,</span>
<span>                         .groups <span class="op">=</span> <span class="st">'drop'</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>delta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">opinion_1</span> <span class="op">-</span> <span class="va">opinion_2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">delta</span> <span class="op">&lt;=</span> <span class="va">threshold</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>my <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                                 min <span class="op">=</span> <span class="va">my_lower_boundary</span>,</span>
<span>                                 max <span class="op">=</span> <span class="va">my_upper_boundary</span><span class="op">)</span>,</span>
<span>                      opinion_new_1 <span class="op">=</span> <span class="va">opinion_1</span> <span class="op">+</span> <span class="va">my</span> <span class="op">*</span> <span class="op">(</span><span class="va">opinion_2</span> <span class="op">-</span> <span class="va">opinion_1</span><span class="op">)</span>,</span>
<span>                      opinion_new_2 <span class="op">=</span> <span class="va">opinion_2</span> <span class="op">+</span> <span class="va">my</span> <span class="op">*</span> <span class="op">(</span><span class="va">opinion_1</span> <span class="op">-</span> <span class="va">opinion_2</span><span class="op">)</span><span class="op">)</span></span>
<span>             <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">meeting_results</span><span class="op">)</span>,</span>
<span>                        <span class="kw">function</span><span class="op">(</span><span class="va">meeting</span><span class="op">)</span> <span class="op">{</span></span>
<span>                          <span class="va">me</span> <span class="op">&lt;&lt;-</span> <span class="va">me</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>                            <span class="fu"><a href="../reference/distribute_characteristic_across_agents.html">distribute_characteristic_across_agents</a></span><span class="op">(</span></span>
<span>                              <span class="st">'opinion'</span>,</span>
<span>                              <span class="va">meeting_results</span><span class="op">[[</span><span class="va">meeting</span>, <span class="st">'opinion_new_1'</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                              <span class="va">.id</span> <span class="op">==</span> <span class="va">meeting_results</span><span class="op">[[</span><span class="va">meeting</span>, <span class="st">'agent_1'</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                              .overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              .suppress_warnings <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>                            <span class="fu"><a href="../reference/distribute_characteristic_across_agents.html">distribute_characteristic_across_agents</a></span><span class="op">(</span></span>
<span>                              <span class="st">'opinion'</span>,</span>
<span>                              <span class="va">meeting_results</span><span class="op">[[</span><span class="va">meeting</span>, <span class="st">'opinion_new_2'</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                              <span class="va">.id</span> <span class="op">==</span> <span class="va">meeting_results</span><span class="op">[[</span><span class="va">meeting</span>, <span class="st">'agent_2'</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                              .overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              .suppress_warnings <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>                        <span class="op">}</span><span class="op">)</span></span>
<span>             <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">me</span><span class="op">)</span></span>
<span>           <span class="op">}</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span>min_opinion <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">me</span>, <span class="va">abm</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">abm</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/convert_agents_to_tibble.html">convert_agents_to_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>minimum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">opinion</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">minimum</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span>max_opinion <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">me</span>, <span class="va">abm</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">abm</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/convert_agents_to_tibble.html">convert_agents_to_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>maximum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">opinion</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">maximum</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Finally, iteration. This is the step that takes a while. Note that we
set a maximum of 20 iterations here so the iteration ticks exactly 20
times (because there is no other way for it to stop):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="va">e</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/iterate.html">iterate</a></span><span class="op">(</span>max_iterations <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Tick 1 finished in 3.112 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.78512566739624"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.62032851479196"</span></span>
<span><span class="co">#&gt; [1] "Tick 2 finished in 3.218 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.51746077728397"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.62032851479196"</span></span>
<span><span class="co">#&gt; [1] "Tick 3 finished in 3.269 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.37934428861777"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.01669245352312"</span></span>
<span><span class="co">#&gt; [1] "Tick 4 finished in 3.07 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -1.55958351868582"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.01669245352312"</span></span>
<span><span class="co">#&gt; [1] "Tick 5 finished in 3.282 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -1.55958351868582"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.01669245352312"</span></span>
<span><span class="co">#&gt; [1] "Tick 6 finished in 3.343 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -1.41499639308866"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 1.89535509730667"</span></span>
<span><span class="co">#&gt; [1] "Tick 7 finished in 3.453 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -1.30345679299076"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 1.41591201735925"</span></span>
<span><span class="co">#&gt; [1] "Tick 8 finished in 3.45 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -1.09726134291104"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.894593571568961"</span></span>
<span><span class="co">#&gt; [1] "Tick 9 finished in 3.535 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.930620809004355"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.691073318067747"</span></span>
<span><span class="co">#&gt; [1] "Tick 10 finished in 3.384 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.772261421122725"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.671915088728044"</span></span>
<span><span class="co">#&gt; [1] "Tick 11 finished in 3.406 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.668620608977825"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.584869739320502"</span></span>
<span><span class="co">#&gt; [1] "Tick 12 finished in 3.398 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.553719457872648"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.400198399768659"</span></span>
<span><span class="co">#&gt; [1] "Tick 13 finished in 3.429 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.542052598604424"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.367722105806354"</span></span>
<span><span class="co">#&gt; [1] "Tick 14 finished in 3.426 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.437728305717494"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.364408484791451"</span></span>
<span><span class="co">#&gt; [1] "Tick 15 finished in 3.52 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.309114193130515"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.280808473087339"</span></span>
<span><span class="co">#&gt; [1] "Tick 16 finished in 3.463 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.295983040655522"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.261930793025223"</span></span>
<span><span class="co">#&gt; [1] "Tick 17 finished in 3.465 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.108181681069579"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.224279487997386"</span></span>
<span><span class="co">#&gt; [1] "Tick 18 finished in 3.41 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.0764829158714187"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.190605910749892"</span></span>
<span><span class="co">#&gt; [1] "Tick 19 finished in 3.427 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.042233187948907"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.180475814086634"</span></span>
<span><span class="co">#&gt; [1] "Tick 20 finished in 3.417 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: 0.00886191691704735"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 0.16375595929756"</span></span></code></pre></div>
<p>Let’s look at the environment and also some of the agents.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 6</span></span></span>
<span><span class="co">#&gt;    .tick min_opinion max_opinion .runtime      .n_agents_after_tick</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;drtn&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1    -<span style="color: #BB0000;">2.79</span>          2.62  3.112412 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2    -<span style="color: #BB0000;">2.52</span>          2.62  3.217685 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3    -<span style="color: #BB0000;">2.38</span>          2.02  3.268857 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     4    -<span style="color: #BB0000;">1.56</span>          2.02  3.069829 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     5    -<span style="color: #BB0000;">1.56</span>          2.02  3.282144 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     6    -<span style="color: #BB0000;">1.41</span>          1.90  3.342595 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     7    -<span style="color: #BB0000;">1.30</span>          1.42  3.453233 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     8    -<span style="color: #BB0000;">1.10</span>          0.895 3.450334 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     9    -<span style="color: #BB0000;">0.931</span>         0.691 3.534730 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    10    -<span style="color: #BB0000;">0.772</span>         0.672 3.384182 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>    11    -<span style="color: #BB0000;">0.669</span>         0.585 3.406185 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>    12    -<span style="color: #BB0000;">0.554</span>         0.400 3.397967 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>    13    -<span style="color: #BB0000;">0.542</span>         0.368 3.429486 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>    14    -<span style="color: #BB0000;">0.438</span>         0.364 3.425963 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>    15    -<span style="color: #BB0000;">0.309</span>         0.281 3.520412 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span>    16    -<span style="color: #BB0000;">0.296</span>         0.262 3.462705 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span>    17    -<span style="color: #BB0000;">0.108</span>         0.224 3.465242 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span>    18    -<span style="color: #BB0000;">0.076</span><span style="color: #BB0000; text-decoration: underline;">5</span>        0.191 3.409827 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span>    19    -<span style="color: #BB0000;">0.042</span><span style="color: #BB0000; text-decoration: underline;">2</span>        0.180 3.427176 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span>    20     0.008<span style="text-decoration: underline;">86</span>       0.164 3.416897 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: .finished_after_tick &lt;lgl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ABM network environment</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* undirected, 100 agents</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* 0 environment characteristic(s), </span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* 2 environment variable(s), </span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* 1 environment rule(s), </span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* simulating (20 tick(s) passed)</span></span></span>
<span></span>
<span><span class="va">e</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/convert_agents_to_tibble.html">convert_agents_to_tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 4</span></span></span>
<span><span class="co">#&gt;    .id   .indegree .outdegree opinion</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> A1    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.143 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> A2    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.054<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> A3    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.052<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> A4    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.141 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> A5    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.142 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> A6    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.069<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> A7    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.046<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> A8    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.014<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> A9    <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.083<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> A10   <span style="color: #949494;">&lt;NULL&gt;</span>    <span style="color: #949494;">&lt;NULL&gt;</span>      0.095<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 90 more rows</span></span></span></code></pre></div>
<p>Finally, let’s see how the distribution of opinions has adjusted
(converged) over time. We look at the mean, minimum and maximum opinion
in each tick and visualize it over time. You can see the starting point
that is quite (as in: normally distributed) scattered and the subsequent
homogenization of opinions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.tick</span>,</span>
<span>             ymin <span class="op">=</span> <span class="va">min_opinion</span>,</span>
<span>             ymax <span class="op">=</span> <span class="va">max_opinion</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_linerange</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span><span class="st">'Time [ticks]'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span><span class="st">'Distribution of Opinions [M with min/max]'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">'Opinion Dynamics over Time'</span><span class="op">)</span></span></code></pre></div>
<p><img src="boundedconfidence_files/figure-html/visualizations-1.png" width="100%"></p>
<p>There is an alternative way, though. One where we iterate tick by
tick to collect each agent’s opinion at every point in time. This also
allows us to follow one particular agent over time in its dynamics of
opinion formation. For that, we start over with the modeling environment
(<code>reset</code> and <code>init</code>, again, and also resetting the
opinions to starting values) and then loop through 20 steps in each of
which we only tick the environment once and extract all agents’
information. The agent information we append (<code>bind_rows</code>) to
a variable/tibble that gets built with three columns, one identifying
the agent, one identifying the tick, and one with the opinion of that
agent after that tick. Finally, we can look at the tibble and, of
course, visualize it (whereby we also color one of the agents,
<code>A100</code>, blue, and all the others lightly red).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="va">e</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/reset.html">reset</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/distribute_characteristic_across_agents.html">distribute_characteristic_across_agents</a></span><span class="op">(</span><span class="st">'opinion'</span>,</span>
<span>                                          <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n_agents</span>,</span>
<span>                                                mean <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                                sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                          .overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                          .suppress_warnings <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">agent_opinions_over_time</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">e</span> <span class="op">&lt;-</span> <span class="va">e</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../reference/tick.html">tick</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">agent_opinions_over_time</span> <span class="op">&lt;-</span> <span class="va">agent_opinions_over_time</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">e</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>                <span class="fu"><a href="../reference/convert_agents_to_tibble.html">convert_agents_to_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>tick <span class="op">=</span> <span class="va">i</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>agent <span class="op">=</span> <span class="va">.id</span>,</span>
<span>                       <span class="va">tick</span>,</span>
<span>                       <span class="va">opinion</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; [1] "Tick 1 finished in 0.065 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.30542578505797"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 2 finished in 2.954 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.30542578505797"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 3 finished in 3.178 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.30542578505797"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 4 finished in 3.134 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.21144998932492"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 5 finished in 3.233 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.21144998932492"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 6 finished in 3.225 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.21144998932492"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 7 finished in 3.311 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.21144998932492"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 8 finished in 3.247 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.21144998932492"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 9 finished in 3.331 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.21144998932492"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 10 finished in 3.29 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.21144998932492"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 11 finished in 3.347 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -2.21144998932492"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 12 finished in 3.453 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -1.94932818719582"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 13 finished in 3.338 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -1.12452784634629"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 14 finished in 3.338 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.900451639436226"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 15 finished in 3.443 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.816468341548787"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 16 finished in 3.423 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.700740831736342"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 17 finished in 3.543 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.439367597300792"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 18 finished in 3.353 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.371866704707868"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 19 finished in 3.375 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.323934237385286"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span><span class="co">#&gt; [1] "Tick 20 finished in 3.419 secs:"</span></span>
<span><span class="co">#&gt; [1] "  min_opinion: -0.315911069402969"</span></span>
<span><span class="co">#&gt; [1] "  max_opinion: 2.49858719659045"</span></span>
<span></span>
<span><span class="co"># this is the environment after being ticked 20 times</span></span>
<span><span class="va">e</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 6</span></span></span>
<span><span class="co">#&gt;    .tick min_opinion max_opinion .runtime        .n_agents_after_tick</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;drtn&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1      -<span style="color: #BB0000;">2.31</span>         2.50 0.06532407 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2      -<span style="color: #BB0000;">2.31</span>         2.50 2.95385408 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3      -<span style="color: #BB0000;">2.31</span>         2.50 3.17845869 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     4      -<span style="color: #BB0000;">2.21</span>         2.50 3.13385201 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     5      -<span style="color: #BB0000;">2.21</span>         2.50 3.23346663 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     6      -<span style="color: #BB0000;">2.21</span>         2.50 3.22522163 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     7      -<span style="color: #BB0000;">2.21</span>         2.50 3.31078148 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     8      -<span style="color: #BB0000;">2.21</span>         2.50 3.24687386 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     9      -<span style="color: #BB0000;">2.21</span>         2.50 3.33138490 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    10      -<span style="color: #BB0000;">2.21</span>         2.50 3.29047465 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>    11      -<span style="color: #BB0000;">2.21</span>         2.50 3.34701633 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>    12      -<span style="color: #BB0000;">1.95</span>         2.50 3.45270586 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>    13      -<span style="color: #BB0000;">1.12</span>         2.50 3.33814240 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>    14      -<span style="color: #BB0000;">0.900</span>        2.50 3.33755851 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>    15      -<span style="color: #BB0000;">0.816</span>        2.50 3.44312978 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span>    16      -<span style="color: #BB0000;">0.701</span>        2.50 3.42324209 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span>    17      -<span style="color: #BB0000;">0.439</span>        2.50 3.54257655 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span>    18      -<span style="color: #BB0000;">0.372</span>        2.50 3.35315633 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span>    19      -<span style="color: #BB0000;">0.324</span>        2.50 3.37529254 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span>    20      -<span style="color: #BB0000;">0.316</span>        2.50 3.41905117 secs                  100</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: .finished_after_tick &lt;lgl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ABM network environment</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* undirected, 100 agents</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* 0 environment characteristic(s), </span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* 2 environment variable(s), </span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* 1 environment rule(s), </span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">* simulating (20 tick(s) passed)</span></span></span>
<span></span>
<span><span class="co"># this is our collected variable/tibble</span></span>
<span><span class="va">agent_opinions_over_time</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,000 × 3</span></span></span>
<span><span class="co">#&gt;    agent  tick opinion</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> A1        1  0.224 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> A2        1  1.18  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> A3        1  0.682 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> A4        1  0.435 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> A5        1 -<span style="color: #BB0000;">0.086</span><span style="color: #BB0000; text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> A6        1  0.690 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> A7        1 -<span style="color: #BB0000;">0.440</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> A8        1 -<span style="color: #BB0000;">1.37</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> A9        1 -<span style="color: #BB0000;">0.189</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> A10       1  0.692 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,990 more rows</span></span></span>
<span></span>
<span><span class="co"># and this is the visualization</span></span>
<span><span class="va">agent_opinions_over_time</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tick</span>,</span>
<span>             y <span class="op">=</span> <span class="va">opinion</span>,</span>
<span>             color <span class="op">=</span> <span class="va">agent</span> <span class="op">==</span> <span class="st">'A100'</span>,</span>
<span>             alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">agent</span> <span class="op">==</span> <span class="st">'A100'</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">10</span><span class="op">)</span>,</span>
<span>             group <span class="op">=</span> <span class="va">agent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span><span class="st">'Time [ticks]'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span><span class="st">'Opinion'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">'Set1'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">'Opinion Dynamics per Agent over Time'</span><span class="op">)</span></span></code></pre></div>
<p><img src="boundedconfidence_files/figure-html/manual_alternative-1.png" width="100%"></p>
<p>As always, we can compile relevant data for any publication we’re
preparing through the <a href="https://doi.org/10.18564/jasss.4259" class="external-link">ODD
protocol</a>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/odd.html">odd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 4</span></span></span>
<span><span class="co">#&gt;   `ODD category`  Element                          Content `tidyABM information`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Overview        Purpose and patterns             <span style="color: #949494;">"</span>Brief… <span style="color: #BB0000;">NA</span>                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Overview        Entities, state variables, and … <span style="color: #949494;">"</span>List … ABM network environm…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Overview        Process overview and scheduling  <span style="color: #949494;">"</span>Provi… environment rules: .…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Design concepts Design concepts                  <span style="color: #949494;">"</span>This … Model has not yet fi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Details         Initialization                   <span style="color: #949494;">"</span>Speci… See the list of agen…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Details         Input data                       <span style="color: #949494;">"</span>Repor… <span style="color: #BB0000;">NA</span>                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Details         Submodels                        <span style="color: #949494;">"</span>Repea… <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mario Haim.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
